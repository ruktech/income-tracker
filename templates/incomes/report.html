{% extends "base.html" %}
{% load humanize %}
{% block title %}Income Report | Income Tracker{% endblock %}
{% block content %}
<section class="report-section fade-in-down">
  <h2>Income Report</h2>

  <form method="get" class="report-filter-form">
    <div class="filter-row">
      {% include "partials/_report_filter_select.html" with label="Year" name="year" options=years selected=selected_year %}
      {% include "partials/_report_filter_select.html" with label="Month" name="month" options=months selected=selected_month is_tuple=True %}
      {% include "partials/_report_filter_select.html" with label="Category" name="category" options=categories selected=selected_category is_model=True all_option="All" %}
      <button type="submit" class="button">Filter</button>
    </div>
  </form>

  <div class="report-summary-card profile-card">
    <div class="card-header">
      <strong>Summary by Currency</strong>
    </div>
    <div class="card-body">
      <table class="report-table">
        <thead>
          <tr>
            <th>Currency</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for currency, total in currency_totals %}
            <tr>
              <td>{{ currency }}</td>
              <td>{{ total|floatformat:2|intcomma }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="2" class="empty">No incomes for this month.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}